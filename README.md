# [RUS/ENG] Контроллер числового четырёхразрядного светодиодного индикатора // Controller of a numeric four-digit LED indicator

## [RUS] Контроллер числового четырёхразрядного светодиодного индикатора

### Введение


Данный проект представляет собой реализацию на Verilog контроллера для четырёхразрядного светодиодного индикатора 3641BS на отладочной плате на базе FPGA семейства Intel® Cyclone® IV.

### Реализация

Концепция работы устройства сводится к тому, что на вход подаётся 14-битное число в двоичном коде, затем производится преобразование исходного двоичного кода в двоично-десятичный прямого замещения. Затем при помощи искусственно сформированной модулем PLL частоты происходит поочерёдное отображение каждого разряда на соответствующем сегменте индикатора. 

Данный проект разделён на модули, связи между которыми показаны на отчёте RTL Viewer.

![Screenshot_20210817_030048](https://user-images.githubusercontent.com/54864545/129645099-995bb5bf-29f7-4c3b-af0c-2b813ae1f5b3.png)

Ниже представлено описание работы каждого из модулей:

- LEDdigDisplayController – файл верхнего уровня.

- PLLdigRotation – формирование частоты переключения разрядов индикатора. Параметры частоты умножителя/делителя 1/100. Частота кварцевого генератора частоты на плате 50 МГц.

- clockCounter – двухразрядный счётчик, цель которого выдавать модулю segmentSwitcher код разряда для отображения.

- digitConv – преобразование двоичного кода в двоично-десятичный прямого замещения по алгоритму «Double dabble» ([wiki](https://en.wikipedia.org/wiki/Double_dabble)).

- numToLED – преобразователь двоично-десятичного кода в код визуального отображения цифры на светодиодном индикаторе. http://www.uize.com/examples/seven-segment-display.html

- segmentSwitcher – выполняет роль мультиплексора, тем самым переключая на выходной порт устройства сигналы сегментов разряда, а также переключает сами разряды исходя из полученного из clockCounter порядкового значения.

Число использованных логических элементов – 150.

### Тестирование

Для тестирования было спроектировано устройство на базе имеющегося с дополнением в виде модуля медленного, для видимого человеческому глазу переключения, счётчика – demoCounter, под который отведён ещё один сигнал из модуля PLL.

Ниже представлен отчёт RTL Viewer тестировочного проекта.

![Screenshot_20210817_031349](https://user-images.githubusercontent.com/54864545/129645265-a9c09f22-3d1b-41df-8372-b0630cca7128.png)

Архив тестировочного проекта доступен в Packages. 

Михаил Шомов

mikle@shomov.spb.ru



## [ENG] Controller of a numeric four-digit LED indicator

### Introduction


This project is a Verilog implementation of a controller for a four-digit 3641BS LED indicator on a debugging board based on an Intel ® Cyclone ® IV FPGA family.

### Implementation

The concept of the device operation is reduced to the fact that a 14-bit number in binary code is supplied to the input, then the original binary code is converted into a binary-decimal direct substitution. Then, using the frequency artificially generated by the PLL module, each digit is displayed alternately on the corresponding segment of the indicator.

This project is divided into modules, the relationships between which are shown on the RTL Viewer report.

![Screenshot_20210817_030048](https://user-images.githubusercontent.com/54864545/129645099-995bb5bf-29f7-4c3b-af0c-2b813ae1f5b3.png)

Below is a description of the operation of each of the modules:

- LEDdigDisplayController – top-level entity.

- PLLdigRotation – formation of the switching frequency of the indicator bits. The frequency parameters of the multiplier/divider are 1/100. The frequency of the quartz frequency generator on the board is 50 MHz.

- clockCounter – a two-bit counter, the purpose of which is to issue a bit code to the segmentSwitcher module for displaying.

- digitConv – conversion of binary code to binary-decimal code using the "Double dabble" algorithm ([wiki](https://en.wikipedia.org/wiki/Double_dabble)).

- numToLED – converter of a binary-decimal code into a code for visual display of a digit on an LED indicator. http://www.uize.com/examples/seven-segment-display.html

- segmentSwitcher – performs the role of a multiplexer, switching the signals of the discharge segments to the output port of the device, and also switches the discharges themselves based on the ordinal value obtained from clockCounter.

The number of logical elements used is 150.

### Testing

For testing, a device was designed on the basis of a demoCounter counter, which is available with an addition in the form of a slow switching module, visible to the human eye, for which another signal from the PLL module is allocated.

Below is the RTL Viewer report of the testing project.

![Screenshot_20210817_031349](https://user-images.githubusercontent.com/54864545/129645265-a9c09f22-3d1b-41df-8372-b0630cca7128.png)

The archive of the testing project is available in Packages.

Mikhail Shomov

mikle@shomov.spb.ru
